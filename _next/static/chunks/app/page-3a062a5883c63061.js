(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8e3:(e,n,t)=>{Promise.resolve().then(t.bind(t,9045))},9045:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>$});var o=t(7437),a=t(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter((e,n,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===n).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,n)=>{let{color:t="currentColor",size:o=24,strokeWidth:r=2,absoluteStrokeWidth:c,className:l="",children:d,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:n,...s,width:o,height:o,stroke:t,strokeWidth:c?24*Number(r)/Number(o):r,className:i("lucide",l),...u},[...m.map(e=>{let[n,t]=e;return(0,a.createElement)(n,t)}),...Array.isArray(d)?d:[d]])}),l=(e,n)=>{let t=(0,a.forwardRef)((t,o)=>{let{className:s,...l}=t;return(0,a.createElement)(c,{ref:o,iconNode:n,className:i("lucide-".concat(r(e)),s),...l})});return t.displayName="".concat(e),t},d=l("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),m=l("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]),u=l("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),h={createFileFilter:e=>{if(!e)return"";let n=e.split(",").map(e=>e.trim()),t=n.filter(e=>!e.startsWith("!")).map(e=>e.includes("/")?e:"\\.".concat(e,"$")),o=n.filter(e=>e.startsWith("!")).map(e=>{let n=e.slice(1);return n.includes("/")?n:"\\.".concat(n,"$")}),a="";return t.length&&(a+=" | grep -e '".concat(t.join("\\|"),"'")),o.length&&(a+=" | grep -v -e '".concat(o.join("\\|"),"'")),a},countFileChanges:(e,n,t)=>{let o=n?" --grep='".concat(n.split(",").map(e=>e.trim()).join("\\|"),"' -i"):"",a=h.createFileFilter(t||"");return"git log".concat(o,' --since="').concat(e,' ago" --name-only --pretty="format:"').concat(a)},getAuthors:(e,n)=>'git log --follow --since="'.concat(n,' ago" --pretty="format:%an" -- "').concat(e,'" | sort -u'),getAuthorContributions:(e,n)=>'git log --follow --since="'.concat(n,' ago" --pretty="format:%an" -- "').concat(e,'" | sort | uniq -c | sort -nr')},g={reset:"\\033[0m",bold:"\\033[1m",dim:"\\033[2m",green:"\\033[32m",yellow:"\\033[33m",blue:"\\033[34m",magenta:"\\033[35m",cyan:"\\033[36m"},p={timeWindow:{name:"timeWindow",label:"Time Window",type:"select",options:["1 month","3 months","6 months","1 year","2 years"],defaultValue:"6 months"},filePattern:{name:"filePattern",label:"File patterns",type:"text",defaultValue:"",placeholder:"e.g., js,ts,!test.ts,!spec.js",description:"Filter by file extensions or paths. Use ! to exclude. Example: js,ts (all JS/TS files), src/*.js (JS in src), !test.ts (exclude test files)"},keywords:{name:"keywords",label:"Filter by commit messages",type:"text",defaultValue:"",placeholder:"e.g., fix,bug,hotfix,patch",description:"Filter by keywords in commit messages, separated by commas. Leave empty for all commits"},topResults:{name:"topResults",label:"Show top results",type:"number",min:5,max:50,defaultValue:10,placeholder:"e.g., 10",description:"Number of top results to display"}},f=[{id:"hotspots",icon:d,iconColor:"#bd2424",title:"Hotspots️",description:"Track frequently changing files that might need attention",params:[p.timeWindow,p.filePattern,p.keywords,p.topResults],generateCommand:e=>'\necho "'.concat(g.cyan,"⚡ Finding most frequently changed files...").concat(g.reset,'"\nresult=$(').concat(h.countFileChanges(e.timeWindow,e.keywords,e.filePattern),' | \\\n  grep -v "^$" | \\\n  sort | \\\n  uniq -c | \\\n  sort -rn | \\\n  head -').concat(e.topResults,' | \\\n  awk \'{printf "    %d changes: %s\\n", $1, $2}\')\n\nif [ -z "$result" ]; then\n  echo "').concat(g.yellow,"No hotspots found matching your criteria").concat(g.reset,'"\nelse\n  count=$(echo "$result" | wc -l | tr -d \' \')\n  echo "').concat(g.green,"Found $count hotspots:").concat(g.reset,'"\n  echo "$result" | awk \'{printf "%s%s%s\\n", "\\033[1m", $0, "\\033[0m"}\'\nfi\n')},{id:"dungeons",icon:m,iconColor:"#aeaeae",title:"Dungeons",description:"Find files with high activity but few contributors",params:[p.timeWindow,p.filePattern,p.keywords,{name:"minChanges",label:"Minimum changes",type:"number",min:1,max:100,defaultValue:5,placeholder:"e.g., 5",description:"Minimum number of changes to consider a file"},{name:"maxAuthors",label:"Maximum authors",type:"number",min:1,max:10,defaultValue:2,placeholder:"e.g., 2",description:"Maximum number of unique authors for a file to be considered a dungeon"},p.topResults],generateCommand:e=>'\necho "'.concat(g.cyan,"\uD83C\uDFF0 Initializing dungeon search...").concat(g.reset,"\"\ntmpdir=$(mktemp -d 2>/dev/null || mktemp -d -t 'tmpdir')\ntrap 'rm -rf \"$tmpdir\"' EXIT\n\necho \"").concat(g.blue,"\uD83D\uDCCA Analyzing change patterns...").concat(g.reset,'"\n').concat(h.countFileChanges(e.timeWindow,e.keywords,e.filePattern),' | \\\n  grep -v "^$" | \\\n  sort | \\\n  uniq -c | \\\n  sort -rn | \\\n  awk \'$1 >= ').concat(e.minChanges,' {print $1, $2}\' > "$tmpdir/files"\n\nif [ ! -s "$tmpdir/files" ]; then\n  echo "').concat(g.yellow,"No files found matching your criteria").concat(g.reset,'"\n  exit 0\nfi\n\necho "').concat(g.blue,"\uD83D\uDC65 Analyzing author patterns...").concat(g.reset,'"\nfound_dungeons=0\n\nwhile IFS= read -r line; do\n  changes=$(echo "$line" | awk \'{print $1}\')\n  file=$(echo "$line" | awk \'{print $2}\')\n  [ ! -f "$file" ] && continue\n  \n  author_count=$(').concat(h.getAuthors("$file",e.timeWindow)," | \\\n    sort | \\\n    uniq | \\\n    wc -l | \\\n    tr -d '[:space:]')\n  \n  if [ \"$author_count\" -le ").concat(e.maxAuthors,' ]; then\n    found_dungeons=$((found_dungeons + 1))\n    if [ "$found_dungeons" -le ').concat(e.topResults,' ]; then\n      echo "\\n').concat(g.magenta,"Dungeon found: ").concat(g.bold,"$file").concat(g.reset,'"\n      echo "').concat(g.cyan,"Changes in last ").concat(e.timeWindow,": ").concat(g.bold,"$changes").concat(g.reset,'"\n      echo "').concat(g.cyan,"Authors:").concat(g.reset,'"\n      ').concat(h.getAuthorContributions("$file",e.timeWindow),' | \\\n        awk \'{\n          count=$1\n          author=$2\n          for(i=3;i<=NF;i++) author=author " " $i\n          printf "  %s%s: %d changes%s\\n", "\\033[1m", author, count, "\\033[0m"\n        }\'\n    fi\n  fi\ndone < "$tmpdir/files"\n\nif [ "$found_dungeons" -eq 0 ]; then\n  echo "').concat(g.yellow,"No dungeons found matching your criteria").concat(g.reset,'"\nelse\n  echo "\\n').concat(g.green,"Found $found_dungeons dungeons in total").concat(g.reset,'"\nfi\n')},{id:"dependency-magnets",icon:u,iconColor:"#8b5cf6",title:"Dependency Magnets",description:"Find files that frequently change together with other files",params:[p.timeWindow,p.filePattern,p.keywords,{name:"minCoChanges",label:"Minimum co-changes",type:"number",min:2,max:20,defaultValue:3,placeholder:"e.g., 3",description:"Minimum number of files changed together to identify coupled changes"},{name:"showRelated",label:"Show related files",type:"number",min:1,max:20,defaultValue:5,placeholder:"e.g., 5",description:"Number of most frequently co-changed files to display"},p.topResults],generateCommand:e=>'\necho "'.concat(g.cyan,"\uD83E\uDDF2 Initializing dependency analysis...").concat(g.reset,'"\ntmpdir=$(mktemp -d 2>/dev/null || mktemp -d -t \'tmpdir\')\ntrap \'rm -rf "$tmpdir"\' EXIT\n\nget_related_files() {\n  local target_file="$1"\n  \n  echo "').concat(g.dim,"Finding commits for $target_file...").concat(g.reset,'" >&2\n  local target_commits=$(git log --follow --since="').concat(e.timeWindow,' ago" --pretty="format:%H" -- "$target_file")\n  \n  echo "').concat(g.dim,"Analyzing co-changes...").concat(g.reset,'" >&2\n  echo "$target_commits" | while read -r commit; do\n    git diff-tree --no-commit-id --name-only -r $commit | grep -v "^$target_file$"\n  done | \\\n    grep -v "^$" | \\\n    sort | \\\n    uniq -c | \\\n    sort -rn | \\\n    head -').concat(e.showRelated,' | \\\n    awk \'{printf "  %s%d co-changes: %s%s\\n", "\\033[1m", $1, $2, "\\033[0m"}\'\n}\n\necho "').concat(g.blue,"\uD83D\uDD0D Finding frequently coupled files...").concat(g.reset,'"\n').concat(h.countFileChanges(e.timeWindow,e.keywords,e.filePattern),' | \\\n  grep -v "^$" | \\\n  grep -v "^[a-f0-9]\\{7,\\}$" | \\\n  sort | \\\n  uniq -c | \\\n  sort -rn | \\\n  awk \'$1 >= ').concat(e.minCoChanges,' {print $2}\' > "$tmpdir/files"\n\nif [ ! -s "$tmpdir/files" ]; then\n  echo "').concat(g.yellow,"No dependency magnets found matching your criteria").concat(g.reset,'"\n  exit 0\nfi\n\nfound_magnets=0\necho "').concat(g.blue,"\uD83D\uDCCA Analyzing dependencies...").concat(g.reset,'"\nwhile IFS= read -r file; do\n  [ ! -f "$file" ] && continue\n  \n  found_magnets=$((found_magnets + 1))\n  if [ "$found_magnets" -le ').concat(e.topResults,' ]; then\n    echo "\\n').concat(g.magenta,"Dependency Magnet: ").concat(g.bold,"$file").concat(g.reset,'"\n    echo "').concat(g.cyan,"Related files:").concat(g.reset,'"\n    get_related_files "$file"\n  fi\ndone < "$tmpdir/files"\n\nif [ "$found_magnets" -eq 0 ]; then\n  echo "').concat(g.yellow,"No dependency magnets found matching your criteria").concat(g.reset,'"\nelse\n  echo "\\n').concat(g.green,"Found $found_magnets dependency magnets in total").concat(g.reset,'"\nfi\n')}],b=l("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),x=l("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),y=e=>{let{code:n,language:t="shell"}=e,[r,i]=(0,a.useState)(!1),s=async()=>{await navigator.clipboard.writeText(n),i(!0),setTimeout(()=>i(!1),2e3)};return(0,o.jsx)("div",{className:"relative group",children:(0,o.jsxs)("pre",{className:"bg-[#0d1117] p-4 rounded-lg overflow-x-auto text-[#c9d1d9] text-sm border border-[#30363d] font-mono selection:bg-[#264f78] max-h-[400px] overflow-y-auto scrollbar-thin scrollbar-thumb-[#30363d] scrollbar-track-transparent",children:[(0,o.jsx)("div",{className:"absolute right-2 top-2 z-10",children:(0,o.jsx)("button",{onClick:s,className:"p-2 text-[#8b949e] hover:text-[#c9d1d9] rounded-md bg-[#161b22] hover:bg-[#1f242c] border border-[#30363d] transition-all duration-200 shadow-sm",title:"Copy to clipboard",children:r?(0,o.jsx)(b,{className:"w-4 h-4"}):(0,o.jsx)(x,{className:"w-4 h-4"})})}),(0,o.jsx)("code",{className:"language-".concat(t," block"),children:n})]})})},w=l("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),j=l("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),N=e=>{let{value:n,onChange:t,min:a,max:r,className:i}=e;return(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("input",{type:"number",value:n,onChange:e=>{let n=Number(e.target.value);(void 0===a||n>=a)&&(void 0===r||n<=r)&&t(n)},className:"w-24 bg-[#0d1117] border border-[#30363d] rounded-lg px-3 py-1.5 \n                text-left text-[#c9d1d9] text-sm focus:outline-none focus:ring-1 \n                focus:ring-[#388bfd]/40 focus:border-[#388bfd] hover:border-[#3d4449] \n                transition-colors duration-200 [appearance:textfield] \n                [&::-webkit-outer-spin-button]:appearance-none \n                [&::-webkit-inner-spin-button]:appearance-none ".concat(i),min:a,max:r}),(0,o.jsxs)("div",{className:"inline-flex border border-[#30363d] rounded-lg overflow-hidden",children:[(0,o.jsx)("button",{type:"button",onClick:()=>t(Math.max(null!=a?a:-1/0,n-1)),disabled:void 0!==a&&n<=a,className:"px-2 py-1.5 text-[#8b949e] hover:text-[#c9d1d9] hover:bg-[#30363d] disabled:text-[#484f58] disabled:hover:bg-transparent disabled:cursor-not-allowed transition-colors duration-200 border-r border-[#30363d]",children:(0,o.jsx)(w,{className:"w-3 h-3",strokeWidth:2.5})}),(0,o.jsx)("button",{type:"button",onClick:()=>t(Math.min(null!=r?r:1/0,n+1)),disabled:void 0!==r&&n>=r,className:"px-2 py-1.5 text-[#8b949e] hover:text-[#c9d1d9] hover:bg-[#30363d] disabled:text-[#484f58] disabled:hover:bg-transparent disabled:cursor-not-allowed transition-colors duration-200",children:(0,o.jsx)(j,{className:"w-3 h-3",strokeWidth:2.5})})]})]})},v=e=>{let{pattern:n}=e,[t,r]=(0,a.useState)(()=>n.params.reduce((e,n)=>({...e,[n.name]:n.defaultValue}),{})),i=(e,n)=>{r(t=>({...t,[e.name]:n}))},s=n.generateCommand(t);return(0,o.jsxs)("div",{className:"rounded-xl border border-[#30363d] bg-[#161b22] overflow-hidden shadow-lg shadow-[#0d1117]/50 hover:border-[#3d4449] transition-all duration-200",children:[(0,o.jsxs)("div",{className:"p-5 flex items-center gap-4 border-b border-[#30363d]",children:[(0,o.jsx)("div",{className:"p-2 rounded-full bg-[#0d1117]/50",children:(0,o.jsx)(n.icon,{color:n.iconColor,className:"w-5 h-5"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-[#c9d1d9] font-semibold text-lg",children:n.title}),(0,o.jsx)("p",{className:"text-[#8b949e] text-sm",children:n.description})]})]}),(0,o.jsxs)("div",{className:"p-5 space-y-5",children:[n.params.map(e=>{var n;return(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("label",{className:"text-[#c9d1d9] text-sm font-medium block",children:[e.label,e.description&&(0,o.jsx)("span",{className:"text-[#8b949e] ml-2 text-xs font-normal",children:e.description})]}),"select"===e.type?(0,o.jsx)("select",{value:String(t[e.name]),onChange:n=>i(e,n.target.value),className:"w-full bg-[#0d1117] border border-[#30363d] rounded-lg pl-3 pr-8 py-2 text-[#c9d1d9] text-sm focus:outline-none focus:ring-1 focus:ring-[#888b99]/40 focus:border-[#888b99] hover:border-[#3d4449] transition-colors duration-200 appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IiM4YjkxOTgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNC40MjcgOS40MjdsMy4zOTYgMy4zOTZhLjI1MS4yNTEgMCAwMC4zNTQgMGwzLjM5Ni0zLjM5NkEuMjUuMjUgMCAwMDExLjM5NiA5SDQuNjA0YS4yNS4yNSAwIDAwLS4xNzcuNDI3ek0xMS4zOTYgN0g0LjYwNGEuMjUuMjUgMCAwMS0uMTc3LS40MjdsMy4zOTYtMy4zOTZhLjI1MS4yNTEgMCAwMS4zNTQgMGwzLjM5NiAzLjM5NkEuMjUuMjUgMCAwMTExLjM5NiA3eiI+PC9wYXRoPjwvc3ZnPg==')] bg-[length:16px_16px] bg-no-repeat bg-[right_8px_center]",children:null===(n=e.options)||void 0===n?void 0:n.map(e=>(0,o.jsx)("option",{value:e,className:"bg-[#0d1117] text-[#c9d1d9]",children:e},e))}):"number"===e.type?(0,o.jsx)(N,{value:Number(t[e.name]),onChange:n=>i(e,n),min:e.min,max:e.max}):(0,o.jsx)("input",{type:"text",placeholder:e.placeholder,value:String(t[e.name]),onChange:n=>i(e,n.target.value),className:"w-full bg-[#0d1117] border border-[#30363d] rounded-lg px-3 py-2 text-[#c9d1d9] text-sm focus:outline-none focus:ring-1 focus:ring-[#888b99]/40 focus:border-[#888b99] hover:border-[#3d4449] transition-colors duration-200"})]},e.name)}),(0,o.jsxs)("div",{className:"mt-6",children:[(0,o.jsx)("label",{className:"text-[#c9d1d9] text-sm font-medium mb-2 block",children:"Generated Command"}),(0,o.jsx)(y,{code:s.trim()})]})]})]})},k=l("Flashlight",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]);function $(){return(0,o.jsx)("div",{className:"min-h-screen bg-[#0d1117] text-[#c9d1d9] p-6",children:(0,o.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,o.jsxs)("header",{className:"text-center py-1",children:[(0,o.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,o.jsx)(k,{className:"w-8 h-8 text-yellow-500 transform rotate-[145deg] animate-shine"}),(0,o.jsx)("h1",{className:"text-3xl font-bold text-glow",children:"Git Spotlight"})]}),(0,o.jsx)("p",{className:"text-[#8b949e] max-w-2xl mx-auto mb-3",children:"Spot pain points in your code through git history"})]}),(0,o.jsx)("div",{className:"grid grid-cols-1 gap-6",children:f.map(e=>(0,o.jsx)(v,{pattern:e},e.id))}),(0,o.jsxs)("footer",{className:"text-center text-sm py-8 space-y-4",children:[(0,o.jsxs)("p",{className:"text-[#8b949e]",children:["Originally presented in"," ",(0,o.jsx)("span",{className:"text-[#c9d1d9]",children:'"Pinpointing Pain Points in Your Code: Effective Value-Driven Refactoring"'}),(0,o.jsx)("br",{}),(0,o.jsx)("span",{className:"text-[#8b949e]",children:"by Asaf Korem • Wix Engineering Conference 2024"})]}),(0,o.jsxs)("a",{href:"https://github.com/asafkorem/git-spotlight",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2.5 px-4 py-2 rounded-full bg-[#21262d] hover:bg-[#30363d] border border-[#30363d] hover:border-[#8b949e] transition-all duration-200 ease-in-out group text-[#c9d1d9] hover:text-white",children:[(0,o.jsx)("img",{src:"/github.svg",alt:"GitHub",className:"w-5 h-5 opacity-90 group-hover:opacity-100 transition-opacity"}),(0,o.jsx)("span",{children:"Contribute on GitHub"})]})]})]})})}}},e=>{var n=n=>e(e.s=n);e.O(0,[130,215,744],()=>n(8e3)),_N_E=e.O()}]);