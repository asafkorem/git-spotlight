(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6879:(e,a,t)=>{Promise.resolve().then(t.bind(t,1227))},1227:(e,a,t)=>{"use strict";t.d(a,{default:()=>N});var r=t(7437),s=t(2265),n=t(3765),i=t(4265),l=t(1905),o=t(2300),c=t(690),m=t(4839),d=t(6164);function g(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,d.m6)((0,m.W)(a))}let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:g("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});x.displayName="Card";let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:g("flex flex-col space-y-1.5 p-6",t),...s})});u.displayName="CardHeader";let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("h3",{ref:a,className:g("text-2xl font-semibold leading-none tracking-tight",t),...s})});p.displayName="CardTitle",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("p",{ref:a,className:g("text-sm text-muted-foreground",t),...s})}).displayName="CardDescription";let y=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:g("p-6 pt-0",t),...s})});y.displayName="CardContent",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:g("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter";let h=["1 month","3 months","6 months","1 year","2 years"],f={hotspots:{useGlobal:!0,timeWindow:"1 year",keywords:"fix,bug,refactor",limit:10},dungeons:{useGlobal:!0,timeWindow:"1 year",keywords:"fix,bug,refactor",minChanges:5,maxAuthors:2},magnets:{useGlobal:!0,timeWindow:"1 year",keywords:"fix,bug,refactor",minCoupling:3}},b=[{id:"hotspots",icon:(0,r.jsx)(n.Z,{className:"w-6 h-6 text-orange-500"}),title:"Hotspots \uD83C\uDF36️\uD83D\uDD25",description:"Track frequently changing files that might need attention",command:e=>{let a=e.keywords?'--grep="'.concat(e.keywords.split(",").join("\\|"),'" -i'):"";return'git log --since="'.concat(e.timeWindow,' ago" ').concat(a," --name-only --pretty=format: | sort | uniq -c | sort -nr | head -").concat(e.limit)},params:[{name:"limit",label:"Number of files to show",type:"number",min:5,max:50}]},{id:"dungeons",icon:(0,r.jsx)(i.Z,{className:"w-6 h-6 text-purple-500"}),title:"Dungeons \uD83D\uDC80\uD83D\uDC09",description:"Find complex code sections with limited maintainers",command:e=>{let a=e.keywords?'--grep="'.concat(e.keywords.split(",").join("\\|"),'" -i'):"";return'git log --since="'.concat(e.timeWindow,' ago" ').concat(a,' --name-only --pretty=format: | sort | uniq | while read -r file; do\n    if [ ! -z "$file" ]; then\n        changes=$(git log --since="').concat(e.timeWindow,' ago" ').concat(a,' --name-only | grep -c "^$file" || echo 0)\n        if [ "$changes" -ge ').concat(e.minChanges,' ]; then\n            author_count=$(git log --since="').concat(e.timeWindow,' ago" --pretty=format:"%an" -- "$file" | sort -u | wc -l)\n            if [ "$author_count" -le ').concat(e.maxAuthors,' ]; then\n                echo -n "$file ($changes changes, $author_count authors): "\n                git log --since="').concat(e.timeWindow,' ago" --pretty=format:"%an" -- "$file" |                 sort | uniq -c | sort -nr |                 awk \'{arr[$2]=$1; sum+=$1} \n                     END {\n                         for (author in arr) {\n                             printf "%s (%.1f%%) ", author, (arr[author]/sum)*100\n                         }\n                         print ""\n                     }\'\n            fi\n        fi\n    fi\ndone | sort -t"(" -k2 -nr')},params:[{name:"minChanges",label:"Minimum changes",type:"number",min:1,max:100},{name:"maxAuthors",label:"Maximum authors",type:"number",min:1,max:10}]},{id:"magnets",icon:(0,r.jsx)(l.Z,{className:"w-6 h-6 text-amber-500"}),title:"Dependency Magnets \uD83E\uDDF2",description:"Identify files often changed together",command:e=>{let a=e.keywords?'--grep="'.concat(e.keywords.split(",").join("\\|"),'" -i'):"";return'git log --since="'.concat(e.timeWindow,' ago" ').concat(a,' --name-only --pretty=format:"%h" | awk -v min=').concat(e.minCoupling,' \'\nBEGIN { commit = "" }\nNF==1 { commit = $1; next }\n{\n    for (i=1; i<=NF; i++) {\n        for (j=i+1; j<=NF; j++) {\n            pair = ($i < $j) ? $i "|" $j : $j "|" $i\n            count[pair]++\n        }\n    }\n}\nEND {\n    for (pair in count) {\n        if (count[pair] >= min) {\n            split(pair, files, "|")\n            printf "%d times: %s <-> %s\\n", count[pair], files[1], files[2]\n        }\n    }\n}\' | sort -rn')},params:[{name:"minCoupling",label:"Minimum coupling occurrences",type:"number",min:2,max:50}]}],j=(e,a)=>{let t=e[a];return"number"==typeof t?t:0},N=()=>{let[e,a]=(0,s.useState)("1 year"),[t,n]=(0,s.useState)("fix,bug,refactor"),[i,l]=(0,s.useState)(f),m=(e,a)=>{l(t=>({...t,[e]:{...t[e],...a}}))},d=a=>{let r=i[a];return{...r,timeWindow:r.useGlobal?e:r.timeWindow,keywords:r.useGlobal?t:r.keywords}},g=async e=>{try{await navigator.clipboard.writeText(e)}catch(e){console.error("Failed to copy to clipboard:",e)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-gray-100 py-12 px-4",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)(o.Z,{className:"w-12 h-12 mx-auto mb-4 text-yellow-500"}),(0,r.jsx)("h1",{className:"text-4xl font-bold mb-4 text-yellow-500",children:"GitSpotlight"}),(0,r.jsx)("p",{className:"text-xl text-gray-300 mb-6",children:"Illuminating your code's pain points through git history"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:'From "Pinpointing Pain Points in Your Code: Effective Value-Driven Refactoring" - Wix Engineering Conference 2024'})]}),(0,r.jsxs)("div",{className:"mb-8 bg-gray-800 p-6 rounded-lg border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-blue-400"}),(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Global Parameters"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Time Window"}),(0,r.jsx)("select",{value:e,onChange:e=>a(e.target.value),className:"w-full p-2 bg-gray-700 border-gray-600 rounded-md text-gray-100",children:h.map(e=>(0,r.jsxs)("option",{value:e,children:["Last ",e]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Commit Keywords (comma-separated, leave empty for all commits)"}),(0,r.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:"e.g., fix,bug,refactor",className:"w-full p-2 bg-gray-700 border-gray-600 rounded-md text-gray-100"})]})]})]}),(0,r.jsx)("div",{className:"space-y-8",children:b.map(e=>{let a=d(e.id);return(0,r.jsxs)(x,{className:"bg-gray-800 border-gray-700",children:[(0,r.jsxs)(u,{className:"flex flex-row items-center gap-4 bg-gradient-to-r from-gray-800 to-gray-750",children:[e.icon,(0,r.jsxs)("div",{children:[(0,r.jsx)(p,{className:"text-lg text-gray-100",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:e.description})]})]}),(0,r.jsxs)(y,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gray-850 p-4 rounded-md space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:i[e.id].useGlobal,onChange:a=>m(e.id,{useGlobal:a.target.checked}),className:"rounded bg-gray-700"}),(0,r.jsx)("label",{className:"text-sm text-gray-300",children:"Use global parameters"})]}),!i[e.id].useGlobal&&(0,r.jsxs)("div",{className:"space-y-3 pl-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Time Window"}),(0,r.jsx)("select",{value:i[e.id].timeWindow,onChange:a=>m(e.id,{timeWindow:a.target.value}),className:"w-full p-2 bg-gray-700 border-gray-600 rounded-md text-gray-100",children:h.map(e=>(0,r.jsxs)("option",{value:e,children:["Last ",e]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Keywords"}),(0,r.jsx)("input",{type:"text",value:i[e.id].keywords,onChange:a=>m(e.id,{keywords:a.target.value}),className:"w-full p-2 bg-gray-700 border-gray-600 rounded-md text-gray-100"})]})]}),(0,r.jsx)("div",{className:"space-y-3 pt-2",children:e.params.map(a=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:a.label}),(0,r.jsx)("input",{type:a.type,min:a.min,max:a.max,value:j(i[e.id],a.name),onChange:t=>m(e.id,{[a.name]:Number(t.target.value)}),className:"w-full p-2 bg-gray-700 border-gray-600 rounded-md text-gray-100"})]},a.name))})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("pre",{className:"bg-gray-950 text-gray-100 p-4 rounded-lg overflow-x-auto",children:(0,r.jsx)("code",{className:"text-sm",children:e.command(a)})}),(0,r.jsx)("button",{onClick:()=>g(e.command(a)),className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-700 text-gray-100 rounded hover:bg-gray-600 transition-colors",children:"Copy"})]})]})]},e.id)})}),(0,r.jsxs)("div",{className:"mt-12 text-center space-y-4",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Customize parameters for each pattern or use global settings"}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-800 text-gray-300",children:"git log"}),(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-800 text-gray-300",children:"analytics"}),(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-800 text-gray-300",children:"patterns"})]})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[735,130,215,744],()=>a(6879)),_N_E=e.O()}]);